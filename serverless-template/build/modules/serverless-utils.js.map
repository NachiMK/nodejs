{"version":3,"sources":["../../src/modules/serverless-utils.js"],"names":["queryStringIsTrue","horizontalRule","newline","centerContent","getSubdomainPrefix","STAGE","process","env","isProd","test","getStatus","thing","text","match","RegExp","isComplete","isTrue","value","includes","stripNonAlphaNumericChars","replace","isSetToTrue","queryString","logLevel","width","character","shouldConsoleLog","repeat","console","centerText","content","maxWidth","spacing","Math","floor","length","repeatAmount","initialLineHasBeenDrawn","drawInitialNewline","apiRootName","stage"],"mappings":"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","file":"serverless-utils.js","sourcesContent":["import stripAnsiColors from 'strip-ansi';\n\nconst { STAGE } = process.env;\nexport const isProd = /^prod(?:uction)?$/gim.test(STAGE);\nexport const getStatus = (thing) => (text) => !!thing.match(new RegExp(`^${text}$`, 'i'));\nexport const isComplete = getStatus('completed');\n\nexport const isTrue = (value) =>\n  value && value != null && [true, 'true', 1, '1', 'yes'].includes(value);\n\nexport const stripNonAlphaNumericChars = (value) => `${value}`.replace(/[^\\w\\s]*/gi, '');\n\nexport const isSetToTrue = queryStringIsTrue;\nexport function queryStringIsTrue(queryString) {\n  return isTrue(stripNonAlphaNumericChars(queryString));\n}\n\nconst logLevel = 'info';\n\n/* eslint-disable no-console */\nexport function horizontalRule(width = 78, character = 'â€”', shouldConsoleLog = false) {\n  if (shouldConsoleLog) {\n    return character.repeat(width);\n  }\n  return console[logLevel](`|${character.repeat(width)}|`);\n}\nexport function newline() {\n  console[logLevel](horizontalRule(1, '', true));\n}\n\nexport const centerText = centerContent;\nexport function centerContent(\n  content = '',\n  maxWidth = 78,\n  spacing = Math.floor((maxWidth - stripAnsiColors(content).length) / 2)\n) {\n  const repeatAmount =\n    maxWidth -\n      `${horizontalRule(spacing, ' ', true)}${stripAnsiColors(content)}${horizontalRule(\n        spacing,\n        ' ',\n        true\n      )}`.length <\n    0\n      ? 0\n      : maxWidth -\n        `${horizontalRule(spacing, ' ', true)}${stripAnsiColors(content)}${horizontalRule(\n          spacing,\n          ' ',\n          true\n        )}`.length; // eslint-disable-line\n  console[logLevel](\n    `|${horizontalRule(spacing, ' ', true)}${content}${horizontalRule(\n      spacing,\n      ' ',\n      true\n    )}${' '.repeat(repeatAmount)}|`\n  );\n}\n\nlet initialLineHasBeenDrawn = false;\nexport const drawInitialNewline = () => {\n  if (initialLineHasBeenDrawn) {\n    return false;\n  }\n\n  initialLineHasBeenDrawn = true;\n  newline();\n  horizontalRule();\n  return true;\n};\n\nexport function getSubdomainPrefix(apiRootName = 'api', stage) {\n  if (stage === 'prod') return `${apiRootName}`;\n  if (stage === 'int') return `int-${apiRootName}`;\n  if (stage === 'dev') return `dev-${apiRootName}`;\n\n  // if none of the above trigger, then return a default of dev\"\n  centerText(\"WARNING: Couldn't detect STAGE\");\n  return `dev-${apiRootName}`;\n}\n"]}