{"version":3,"sources":["../../../src/routes/proxy-request/index.js"],"names":["proxy","event","acronym","params","response","headers","Accept","method","json","formatAcronymResult","acronymAPIResult","length","input","sf","acronyms","lfs","map","lf"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AAEO,MAAMA,wBAAQ,uDAEnB,MAAOC,KAAP,IAAiB;AACf,QAAM,EAAEC,OAAF,KAAcD,MAAME,MAA1B;;AAEA,QAAMC,WAAW,MAAM,yBAAO,8DAA6DF,OAAQ,EAA5E,EAA+E;AACpGG,aAAS;AACPC,cAAQ,YADD;AAEP,sBAAgB;AAFT,KAD2F;AAKpGC,YAAQ;AAL4F,GAA/E,CAAvB;AAOA,QAAMC,OAAOJ,SAASI,IAAT,EAAb;AACAP,QAAMG,QAAN,GAAiBK,oBAAoBD,IAApB,CAAjB;AACD,CAdkB,+BAAd;;AAkBP,MAAMC,sBAAuBC,gBAAD,IAAsB;AAChD,MAAI,CAACA,gBAAD,IAAqBA,oBAAoB,IAAzC,IAAiD,EAAEA,iBAAiBC,MAAjB,GAA0B,CAA5B,CAArD,EAAqF;AACnF,WAAO,EAAP;AACD;;AAED,QAAMC,QAAQF,iBAAiB,CAAjB,EAAoBG,EAAlC;AACA,QAAMC,WAAWJ,iBAAiB,CAAjB,EAAoBK,GAApB,CAAwBC,GAAxB,CAA4Bd,WAAWA,QAAQe,EAA/C,CAAjB;;AAEA,SAAO;AACLL,SADK;AAELE;AAFK,GAAP;AAID,CAZD","file":"index.js","sourcesContent":["import ware from 'warewolf';\nimport fetch from 'node-fetch';\nimport { before, after } from '@hixme/before-after-middleware';\n\nexport const proxy = ware(\n  before,\n  async (event) => {\n    const { acronym } = event.params;\n\n    const response = await fetch(`http://www.nactem.ac.uk/software/acromine/dictionary.py?sf=${acronym}`, {\n      headers: {\n        Accept: 'text/plain',\n        'Content-type': 'application/json',\n      },\n      method: 'GET',\n    });\n    const json = response.json();\n    event.response = formatAcronymResult(json);\n  },\n  after,\n);\n\nconst formatAcronymResult = (acronymAPIResult) => {\n  if (!acronymAPIResult || acronymAPIResult == null || !(acronymAPIResult.length > 0)) {\n    return {};\n  }\n\n  const input = acronymAPIResult[0].sf;\n  const acronyms = acronymAPIResult[0].lfs.map(acronym => acronym.lf);\n\n  return {\n    input,\n    acronyms,\n  };\n};\n"]}