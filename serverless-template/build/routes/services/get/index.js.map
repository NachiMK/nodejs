{"version":3,"sources":["../../../../src/routes/services/get/index.js"],"names":["get","before","require","ROLE_PLATFORM_HIXME_ADMIN","tableName","key","event","Domain","queryStringParameters","indexName","after"],"mappings":";;;;;;;AAAA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEO,MAAMA,oBAAM,wBACjBC,6BADiB,EAEjB,wCAAcC,QAAQ,uBAAR,CAAd,CAFiB,EAGjB,gDAAiB,CAACC,qCAAD,CAAjB,CAHiB,EAIjB,mCAAY;AACVC,aAAW,UADD;AAEVC,OAAMC,KAAD,KAAY,EAAEC,QAAQD,MAAME,qBAAN,CAA4BD,MAAtC,EAAZ,CAFK;AAGVE,aAAW;AAHD,CAAZ,CAJiB,EASjBC,4BATiB,CAAZ","file":"index.js","sourcesContent":["import ware from 'warewolf';\nimport { before, after } from '@hixme/before-after-middleware';\nimport { isRoleAuthorized } from '@hixme/role-authorizer-middleware';\nimport { validateQuery } from '@hixme/validator-middleware';\nimport { queryDynamo } from '@hixme/dynamo-middleware';\nimport { ROLE_PLATFORM_HIXME_ADMIN } from '@hixme/role-policy';\n\nexport const get = ware(\n  before,\n  validateQuery(require('./request.schema.json')), // eslint-disable-line\n  isRoleAuthorized([ROLE_PLATFORM_HIXME_ADMIN]),\n  queryDynamo({\n    tableName: 'services',\n    key: (event) => ({ Domain: event.queryStringParameters.Domain }),\n    indexName: 'Domain-index',\n  }),\n  after\n);\n"]}