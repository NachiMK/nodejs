{"version":3,"sources":["../../../../src/routes/services/post/index.js"],"names":["post","before","require","ROLE_PLATFORM_HIXME_ADMIN","addUpdatedByToBody","tableName","item","event","body","key","Id","schema","after"],"mappings":";;;;;;;AAAA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEO,MAAMA,sBAAO,wBAClBC,6BADkB,EAElB,uCAAaC,QAAQ,uBAAR,CAAb,CAFkB,EAGlB,gDAAiB,CAACC,qCAAD,CAAjB,CAHkB,EAIlBC,uCAJkB,EAKlB,sCAAe;AACbC,aAAW,UADE;AAEbC,QAAOC,KAAD,IAAWA,MAAMC,IAFV;AAGbC,OAAMF,KAAD,IAAWA,MAAMC,IAAN,CAAWE,EAHd;AAIbC,UAAQ;AAJK,CAAf,CALkB,EAWlBC,4BAXkB,CAAb","file":"index.js","sourcesContent":["import ware from 'warewolf';\nimport { before, after } from '@hixme/before-after-middleware';\nimport { isRoleAuthorized } from '@hixme/role-authorizer-middleware';\nimport { validateBody } from '@hixme/validator-middleware';\nimport { saveDynamoItem } from '@hixme/dynamo-middleware';\nimport { ROLE_PLATFORM_HIXME_ADMIN } from '@hixme/role-policy';\nimport { addUpdatedByToBody } from '../../../modules/updated-by-middleware';\n\nexport const post = ware(\n  before,\n  validateBody(require('./request.schema.json')), // eslint-disable-line\n  isRoleAuthorized([ROLE_PLATFORM_HIXME_ADMIN]),\n  addUpdatedByToBody,\n  saveDynamoItem({\n    tableName: 'services',\n    item: (event) => event.body,\n    key: (event) => event.body.Id,\n    schema: 'request.schema.json',\n  }),\n  after\n);\n"]}