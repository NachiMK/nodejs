{"version":3,"sources":["../../../../src/routes/members/get/index.js"],"names":["get","require","event","memberGraph","FirstName","LastName","DateOfBirth","Phones","PhoneNumber","Children","member","pathParameters","MemberID","result"],"mappings":";;;;;;;AAAA;;;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;AAEO,MAAMA,oBAAM,uDAEjB,yCAAeC,QAAQ,uBAAR,CAAf,CAFiB,EAGjB,gDAAiB,uCAAjB,CAHiB,iCAKjB,MAAOC,KAAP,IAAiB;AACf,QAAMC,cACN;AACEC,eAAW,MADb;AAEEC,cAAU,KAFZ;AAGEC,iBAAa,YAHf;AAIEC,YAAQ,CACN;AACEC,mBAAa;AADf,KADM,EAIN;AACEA,mBAAa;AADf,KAJM,CAJV;AAYEC,cAAU,CACR;AACEL,iBAAW,OADb;AAEEC,gBAAU,KAFZ;AAGEC,mBAAa;AAHf,KADQ,EAMR;AACEF,iBAAW,OADb;AAEEG,cAAQ,CACN;AACEC,qBAAa;AADf,OADM;AAFV,KANQ;AAZZ,GADA;;AA8BA,QAAM,gCAAkBL,WAAlB,CAAN;;AAEA,QAAMO,SAAS,MAAM,6BAAeR,MAAMS,cAAN,CAAqBC,QAApC,CAArB;;AAEAV,QAAMW,MAAN,GAAeH,MAAf;AACD,CAzCgB,iEAAZ","file":"index.js","sourcesContent":["import ware from 'warewolf';\nimport { before, after } from '@hixme/before-after-middleware';\nimport { isRoleAuthorized } from '@hixme/role-authorizer-middleware';\nimport { validateParams } from '@hixme/validator-middleware';\nimport { ROLE_PLATFORM_HIXME_ADMIN } from '@hixme/role-policy';\nimport { getMemberGraph, upsertMemberGraph } from '../../../controllers/members';\nimport { initKnexAsync, destroyKnexAsync } from '../../../modules/objection-utils';\n\nexport const get = ware(\n  before,\n  validateParams(require('./request.schema.json')), // eslint-disable-line\n  isRoleAuthorized([ROLE_PLATFORM_HIXME_ADMIN]),\n  initKnexAsync,\n  async (event) => {\n    const memberGraph =\n    {\n      FirstName: 'John',\n      LastName: 'Doe',\n      DateOfBirth: '1980-01-01',\n      Phones: [\n        {\n          PhoneNumber: '800-111-2222',\n        },\n        {\n          PhoneNumber: '310-123-3333',\n        },\n      ],\n      Children: [\n        {\n          FirstName: 'Danny',\n          LastName: 'Doe',\n          DateOfBirth: '2000-10-01',\n        },\n        {\n          FirstName: 'Jenny',\n          Phones: [\n            {\n              PhoneNumber: '310-0910-1237',\n            },\n          ],\n        },\n      ],\n    };\n\n    await upsertMemberGraph(memberGraph);\n\n    const member = await getMemberGraph(event.pathParameters.MemberID);\n\n    event.result = member;\n  },\n  destroyKnexAsync,\n  after,\n);\n"]}